<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <title>AJAX and JSON Web Services</title>
        <script>


           function loadDoc() {

               var data = null;

               var request = new XMLHttpRequest();
               request.withCredentials = true;

               // defining event listener for ready state change event
              // request.addEventListener("readystatechange", function () {
	           request.onreadystatechange = function() {
                    //if (this.readyState === this.DONE) {
                    if(this.readyState === 4 && this.status === 200) {
		              console.log(this.responseText);

                      var joke = JSON.parse(this.responseText);
                      document.getElementById("joke").innerHTML = joke.value;
	               }
               };

               //instantiating the request object
               request.open("GET", "https://matchilling-chuck-norris-jokes-v1.p.rapidapi.com/jokes/random");
               request.setRequestHeader("x-rapidapi-host", "matchilling-chuck-norris-jokes-v1.p.rapidapi.com");
               request.setRequestHeader("x-rapidapi-key", "7b508a6649msh867677fea66a1a7p110310jsna91c7ea08972");
                request.setRequestHeader("accept", "application/json");

               request.send(data);




           }



            function earth() {
                var data = null;

               var picEarth = new XMLHttpRequest();
                picEarth.withCredentials = true;

                picEarth.addEventListener("readystatechange", function () {
	           if (this.readyState === this.DONE) {
		          console.log(this.response);
                  var earthImg = JSON.parse(this.response);
                  document.getElementById("earth").innerHTML = earthImg;
	           }
            });

            picEarth.open("POST", "https://nasaapidimasv1.p.rapidapi.com/getEarthImagery");
            picEarth.setRequestHeader("x-rapidapi-host", "NasaAPIdimasV1.p.rapidapi.com");
            picEarth.setRequestHeader("x-rapidapi-key", "7b508a6649msh867677fea66a1a7p110310jsna91c7ea08972");
            picEarth.setRequestHeader("content-type", "application/x-www-form-urlencoded");

            picEarth.send(data);
            }

           function mathFacts() {
            var data = null;

            var mtrivia = new XMLHttpRequest();
            mtrivia.withCredentials = true;

            mtrivia.addEventListener("readystatechange", function () {
	           if (this.readyState === this.DONE) {
		              console.log(this.responseText);
	           }
            });

            mtrivia.open("GET", "https://numbersapi.p.rapidapi.com/random/trivia?max=20&fragment=true&min=10&json=true");
            mtrivia.setRequestHeader("x-rapidapi-host", "numbersapi.p.rapidapi.com");
            mtrivia.setRequestHeader("x-rapidapi-key", "7b508a6649msh867677fea66a1a7p110310jsna91c7ea08972");

            mtrivia.send(data);

           }
        </script>
    </head>
    <body>

        <div id="result">
           <button type="button" onclick="loadDoc()">Request Data</button>
            <p id="joke"></p>
        </div>

        <div id="results">
            <button type="button" onclick="earth()">Images</button>
            <p id="earth"></p>
        </div>

        <div id="facts">
            <button type="button" onclick="mathFacts()">Trivia</button>
            <p id="trivia"></p>
        </div>



    </body>
</html>
